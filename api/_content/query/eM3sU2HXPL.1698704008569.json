{"_path":"/usage/accessing-map","_dir":"usage","_draft":false,"_partial":false,"_locale":"","title":"Accessing Map","description":"","body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"composables"},"children":[{"type":"text","value":"Composables"}]},{"type":"element","tag":"h3","props":{"id":"usemapbox"},"children":[{"type":"text","value":"useMapbox"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The simplest way to access the map instance on setup is with the useMapbox composable. You must provide the map id."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The map instance will not be available until the page is fully loaded, so you must access it through a callback."}]},{"type":"element","tag":"pre","props":{"className":"language-js shiki shiki-themes github-dark github-light","code":"    useMapbox(mapId, (map) => {\n      // Do whatever with map here\n    })\n","language":"js","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"    useMapbox"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"(mapId, ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#FFAB70;--shiki-default:#E36209"},"children":[{"type":"text","value":"map"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#6A737D;--shiki-default:#6A737D"},"children":[{"type":"text","value":"      // Do whatever with map here\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"    })\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"NOTE: The callback will only be run after the map has loaded (so if you do "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"map.on('load')"}]},{"type":"text","value":", it will not work)."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you want to access the map before it has loaded, there is the "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"useMapboxBeforeLoad"}]},{"type":"text","value":" composable instead."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"useMapbox"}]},{"type":"text","value":" should be preferred over "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"useMapboxBeforeLoad"}]},{"type":"text","value":" with "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"map.on('load')"}]},{"type":"text","value":" to ensure that your code gets run on reactive updates while the map is already loaded."}]},{"type":"element","tag":"h3","props":{"id":"usemapboxmarker-usemapboxpopup"},"children":[{"type":"text","value":"useMapboxMarker & useMapboxPopup"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can access your markers and popups in the same way as "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"useMapbox"}]},{"type":"text","value":" with "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"useMapboxMarker"}]},{"type":"text","value":" & "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"useMapboxPopup"}]},{"type":"text","value":"!"}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"refs"},"children":[{"type":"text","value":"Refs"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When working with the map reactively (for example, in a watcher or computed method), you should instead use the map ref. The refs should be treated similar to Vue "},{"type":"element","tag":"a","props":{"href":"https://vuejs.org/guide/essentials/template-refs.html","rel":["nofollow"]},"children":[{"type":"text","value":"template refs"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"It is important to remember that the refs will be undefined until they have been initialized, which will be after the component is mounted."}]}]},{"type":"element","tag":"pre","props":{"className":"language-js shiki shiki-themes github-dark github-light","code":"    const mapRef = useMapboxRef(mapId);\n    const markerRef = useMapboxMarkerRef(markerId);\n    const popupRef = useMapboxPopupRef(markerId);\n","language":"js","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"    const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" mapRef"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":" useMapboxRef"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"(mapId);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"    const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" markerRef"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":" useMapboxMarkerRef"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"(markerId);\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"    const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" popupRef"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":" useMapboxPopupRef"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"(markerId);\n"}]}]}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"composables","depth":2,"text":"Composables","children":[{"id":"usemapbox","depth":3,"text":"useMapbox"},{"id":"usemapboxmarker-usemapboxpopup","depth":3,"text":"useMapboxMarker & useMapboxPopup"}]},{"id":"refs","depth":2,"text":"Refs"}]}},"_type":"markdown","_id":"content:3.usage:2.accessing-map.md","_source":"content","_file":"3.usage/2.accessing-map.md","_extension":"md"}